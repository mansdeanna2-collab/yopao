<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Category ‚Äì Buy Discount Postage Online</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/category.css">
</head>
<body>

<!-- ========== Top Bar ========== -->
<div class="top-bar">
  <span class="top-bar-text">Free Shipping On All Orders. 3‚Äì8 Business Days Delivery</span>
  <span class="top-bar-search"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="7"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span>
</div>

<!-- ========== Header ========== -->
<div class="header-wrapper" id="header">
  <header class="site-header">
    <button class="hamburger" id="hamburger-btn" aria-label="Menu">&#9776;</button>
    <div class="logo"><a href="../"><span class="logo-icon">S</span>stampstores</a></div>
    <nav class="nav-main">
      <a href="../">HOME</a>
      <a href="/category/#flag-series">FLAG SERIES</a>
      <a href="/category/#christmas-holiday">CHRISTMAS &amp; HOLIDAY</a>
      <a href="/category/#wedding-flowers">WEDDING &amp; FLOWERS</a>
      <a href="/category/#animal-series">ANIMAL SERIES</a>
      <a href="/category/#other-years">OTHER YEARS ‚ñæ</a>
      <a href="/contact-us/">CONTACT US</a>
    </nav>
    <div class="header-right">
      <a href="#" id="account-btn" class="header-icon account-icon" aria-label="Account"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.7 0 4.8-2.1 4.8-4.8S14.7 2.4 12 2.4 7.2 4.5 7.2 7.2 9.3 12 12 12zm0 2.4c-3.2 0-9.6 1.6-9.6 4.8v2.4h19.2v-2.4c0-3.2-6.4-4.8-9.6-4.8z"/></svg></a>
      <div class="cart-wrapper" id="cart-wrapper">
        <button class="cart-link" id="cart-toggle" aria-label="Cart">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
            <span id="cart-total">$0.00</span>
            <span class="cart-divider"></span>
            <span class="cart-badge" id="cart-badge">0</span>
          </button>
        <div class="cart-dropdown" id="cart-dropdown">
          <div id="cart-items-list"></div>
          <div class="cart-subtotal" id="cart-subtotal-row" style="display:none">
            <span>Subtotal:</span>
            <span class="subtotal-amount" id="cart-subtotal-amount">$0.00</span>
          </div>
          <div class="cart-actions" id="cart-action-btns" style="display:none">
            <button class="cart-btn view-cart-btn">VIEW CART</button>
            <button class="cart-btn checkout-btn">CHECKOUT</button>
          </div>
        </div>
      </div>
    </div>
  </header>
</div>

<div class="mobile-nav-overlay" id="mobile-nav-overlay"></div>
<div class="mobile-nav-panel" id="mobile-nav-panel">
  <div class="close-btn" id="mobile-nav-close">&times;</div>
  <ul>
    <li><a href="../">HOME</a></li>
    <li><a href="/category/#flag-series">FLAG SERIES</a></li>
    <li><a href="/category/#christmas-holiday">CHRISTMAS &amp; HOLIDAY</a></li>
    <li><a href="/category/#wedding-flowers">WEDDING &amp; FLOWERS</a></li>
    <li><a href="/category/#animal-series">ANIMAL SERIES</a></li>
    <li><a href="/category/#other-years">OTHER YEARS</a></li>
    <li><a href="/category/#2-oz-letter">2 OZ LETTER</a></li>
    <li><a href="/category/#global-series">GLOBAL SERIES</a></li>
    <li><a href="/contact-us/">CONTACT US</a></li>
  </ul>
</div>

<!-- ========== Breadcrumb & Page Title ========== -->
<div class="page-title-section">
  <div class="page-title-inner">
    <div class="breadcrumb">
      <a href="../">HOME</a>
      <span class="divider">/</span>
      <span class="current" id="breadcrumb-category"></span>
    </div>
    <div class="page-title-right">
      <span class="result-count" id="result-count-top"></span>
      <select class="sort-select">
        <option selected>Default sorting</option>
        <option>Sort by popularity</option>
        <option>Sort by latest</option>
        <option>Sort by price: low to high</option>
        <option>Sort by price: high to low</option>
      </select>
    </div>
  </div>
</div>

<!-- ========== Main Content ========== -->
<div class="main-content">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-search">
      <input type="text" placeholder="Search‚Ä¶">
      <button type="button">üîç</button>
    </div>

    <div class="price-filter">
      <h3 class="filter-title">Filter by price</h3>
      <div class="price-slider-container">
        <div class="price-slider">
          <div class="price-slider-fill"></div>
          <div class="price-slider-handle left"></div>
          <div class="price-slider-handle right"></div>
        </div>
      </div>
      <div class="price-filter-actions">
        <button class="filter-btn">Filter</button>
        <span class="price-label">Price: $20 ‚Äî $30</span>
      </div>
    </div>
  </aside>

  <!-- Products Grid -->
  <div class="products-area">
    <div class="products-grid" id="products-grid">
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
      <div class="skeleton-card"><div class="skeleton-img"></div><div class="skeleton-text"></div><div class="skeleton-text short"></div></div>
    </div>

    <!-- Pagination -->
    <div class="pagination-area" id="pagination-area">
      <span class="result-count-bottom" id="result-count-bottom"></span>
      <nav class="pagination" id="pagination-nav" aria-label="Page navigation"></nav>
    </div>

  </div>
</div>

<!-- ========== Footer ========== -->
<footer>
  <div class="footer-content">
    <div class="footer-columns">
      <div class="footer-column">
        <h3>INFORMATION</h3>
        <div class="footer-divider"></div>
        <ul>
          <li><a href="/privacy-policy/">Privacy Policy</a></li>
          <li><a href="#">Shipping Policy</a></li>
          <li><a href="#">Refund and Return Policy</a></li>
          <li><a href="#">Terms of Service</a></li>
          <li><a href="#">Billings Terms and Condition</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>NEED HELP</h3>
        <div class="footer-divider"></div>
        <ul>
          <li><a href="#">About Us</a></li>
          <li><a href="#">Track Order</a></li>
          <li><a href="/contact-us/">Contact Us</a></li>
          <li><a href="#">FAQs</a></li>
        </ul>
      </div>
      <div class="footer-column">
        <h3>CONTACT</h3>
        <div class="footer-divider"></div>
        <div class="contact-info">
          <p><strong>EDDM LLC</strong></p>
          <p><strong>Email:</strong> support@eddm.shop</p>
          <p><strong>Phone:</strong> (970) 329-9777</p>
          <p><strong>Address:</strong> 3605 Avalon St, Philadelphia, PA 19114</p>
        </div>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <div class="payment-icons">
      <span class="footer-pay-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" width="20" height="20"><circle cx="20" cy="20" r="20" fill="#26A17B"/><path d="M22.6 21.5v0c-.2 0-1 .1-2.6.1s-2.2-.1-2.5-.1c-5-.2-8.8-1.2-8.8-2.3s3.7-2.1 8.8-2.3v3.6c.4 0 1.1.1 2.6.1 1.7 0 2.3-.1 2.6-.1v-3.6c5 .2 8.8 1.2 8.8 2.3-.1 1.2-3.8 2.1-8.9 2.3zm0-5v-3.2h7.3v-4.8H10.2v4.8h7.3v3.2c-5.7.3-10 1.5-10 3s4.3 2.8 10 3v10.7h5v-10.7c5.7-.3 10-1.5 10-3s-4.3-2.8-10-3z" fill="#fff"/></svg>
        USDT TRC20
      </span>
      <span class="footer-pay-icon unavailable">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 28" width="20" height="24" aria-label="PayPal"><path fill="#003087" d="M19.5 7.8c.3-2 0-3.3-.9-4.6C17.4 1.7 15 .9 12 .9H4.4c-.5 0-1 .4-1.1.9L.6 19.6c-.1.3.2.6.5.6h3.6l.9-5.7v.2c.1-.5.6-.9 1.1-.9h2.2c4.4 0 7.8-1.8 8.8-6.9v-.5c-.1 0-.1 0 0 0 .3-1.7.3-2.8-.2-3.6z"/><path fill="#0070ba" d="M19.5 7.8c-.3 1.8-.9 3.3-2.2 4.4-1.5 1.3-3.5 1.9-6 1.9h-1.5c-.5 0-1 .4-1.1.9l-1.2 7.5c-.1.3.2.6.5.6h3.2c.5 0 .9-.3 1-.8l.7-4.6c.1-.5.5-.8 1-.8h.6c3.8 0 6.8-1.5 7.7-6 .3-1.5.2-2.8-.7-3.7-.3-.3-.6-.5-1-.6-.3.5-.6 1-.7 1.2 0 .1 0 .1-.3 0z"/></svg>
        PayPal
      </span>
    </div>
    <div class="copyright">Copyright 2026 &copy; <strong>eddm.shop</strong></div>
  </div>
</footer>

<!-- Back to Top -->
<button class="back-to-top" id="back-to-top" aria-label="Go to top">&#9650;</button>

<!-- ========== Login Modal ========== -->
<div id="login-modal-overlay">
  <div id="login-modal">
    <button id="login-modal-close" aria-label="Close">&times;</button>
    <h2>Login</h2>
    <form onsubmit="return false;">
      <input class="login-modal-input" type="text" id="login-username" placeholder="Username or Email" aria-label="Username or Email" autocomplete="username">
      <input class="login-modal-input" type="password" id="login-password" placeholder="Password" aria-label="Password" autocomplete="current-password">
      <label class="login-modal-remember"><input type="checkbox"> Remember me</label>
      <button class="login-modal-submit" type="submit">Log in</button>
    </form>
    <a href="#" class="login-modal-lost">Lost your password?</a>
    <hr class="login-modal-divider">
    <button class="login-modal-create" type="button">Create an account</button>
  </div>
</div>

<script src="../js/common.js"></script>
<script>
(function() {
  function ensureLocalImagePath(url) {
    if (!url) return '';
    var m = url.match(/https?:\/\/eddm\.shop\/wp-content\/uploads\/\d{4}\/\d{2}\/(.+)$/);
    if (m) return '/images/products/' + m[1];
    return url;
  }

  function ensureLocalProductImages(product) {
    if (product.img1) product.img1 = ensureLocalImagePath(product.img1);
    if (product.img2) product.img2 = ensureLocalImagePath(product.img2);
    if (product.images && product.images.length) {
      product.images = product.images.map(ensureLocalImagePath);
    }
    return product;
  }

  var PER_PAGE = 12;

  var CATEGORY_MAP = {
    '2017': '2017',
    '2018': '2018',
    '2019': '2019',
    '2020': '2020',
    '2021': '2021',
    '2022': '2022',
    '2023': '2023',
    '2024': '2024',
    '2025': '2025',
    'flag-series': 'Flag Series',
    'christmas-holiday': 'Christmas & Holiday',
    'wedding-flowers': 'Wedding & Flowers',
    'animal-series': 'Animal Series',
    'other-years': 'Other Years',
    '2-oz-letter': '2 oz Letter',
    'global-series': 'Global Series'
  };

  var allProducts = null;

  function parseHash() {
    var hash = window.location.hash.replace(/^#/, '');
    if (!hash) return { slug: '', page: 1 };
    var parts = hash.split('/');
    var slug = parts[0];
    var page = parts[1] ? parseInt(parts[1], 10) : 1;
    if (isNaN(page) || page < 1) page = 1;
    return { slug: slug, page: page };
  }

  function escapeHtml(str) {
    var div = document.createElement('div');
    div.appendChild(document.createTextNode(str));
    return div.innerHTML;
  }

  function renderNotFound() {
    document.getElementById('breadcrumb-category').textContent = 'Category Not Found';
    document.title = 'Category Not Found ‚Äì Buy Discount Postage Online';
    document.getElementById('result-count-top').textContent = '';
    document.getElementById('products-grid').innerHTML =
      '<p style="grid-column:1/-1;text-align:center;padding:2rem;">Category not found. Please select a category:</p>' +
      '<div style="grid-column:1/-1;text-align:center;">' +
      Object.keys(CATEGORY_MAP).map(function(slug) {
        return '<a href="/category/#' + slug + '" style="display:inline-block;margin:0.5rem;padding:0.5rem 1rem;border:1px solid #ccc;border-radius:4px;text-decoration:none;color:#333;">' + escapeHtml(CATEGORY_MAP[slug]) + '</a>';
      }).join('') +
      '</div>';
    document.getElementById('result-count-bottom').textContent = '';
    document.getElementById('pagination-nav').innerHTML = '';
  }

  function renderProducts(products, page, slug) {
    var total = products.length;
    var totalPages = Math.ceil(total / PER_PAGE);
    if (page > totalPages && totalPages > 0) page = totalPages;

    var start = (page - 1) * PER_PAGE;
    var end = Math.min(start + PER_PAGE, total);
    var pageProducts = products.slice(start, end);

    var countText = 'Showing ' + (start + 1) + '\u2013' + end + ' of ' + total + ' results';
    document.getElementById('result-count-top').textContent = countText;
    document.getElementById('result-count-bottom').textContent = countText;

    var grid = document.getElementById('products-grid');
    var html = '';
    for (var i = 0; i < pageProducts.length; i++) {
      var p = pageProducts[i];
      html += '<div class="product-card">' +
        '<a href="/product/#' + encodeURIComponent(p.slug) + '">' +
          '<div class="product-image">' +
            '<img src="' + escapeHtml(p.img1) + '" alt="' + escapeHtml(p.name) + '" loading="lazy">' +
            '<img class="hover-img" src="' + escapeHtml(p.img2) + '" alt="" loading="lazy">' +
          '</div>' +
          '<div class="product-info">' +
            '<p class="product-category">' + escapeHtml(p.category) + '</p>' +
            '<p class="product-name">' + escapeHtml(p.name) + '</p>' +
            '<p class="product-price">' + escapeHtml(p.price) + '</p>' +
          '</div>' +
        '</a>' +
      '</div>';
    }
    grid.innerHTML = html;

    // Pagination
    var nav = document.getElementById('pagination-nav');
    if (totalPages <= 1) {
      nav.innerHTML = '';
      return;
    }
    var pHtml = '';
    for (var pg = 1; pg <= totalPages; pg++) {
      if (pg === page) {
        pHtml += '<span class="page-num current-page">' + pg + '</span>';
      } else {
        var href = '#' + slug + (pg > 1 ? '/' + pg : '');
        pHtml += '<a href="' + href + '" class="page-num">' + pg + '</a>';
      }
    }
    if (page < totalPages) {
      var nextHref = '#' + slug + '/' + (page + 1);
      pHtml += '<a href="' + nextHref + '" class="page-arrow" aria-label="Next page">\u2192</a>';
    }
    nav.innerHTML = pHtml;
  }

  function render() {
    var parsed = parseHash();
    var slug = parsed.slug;
    var page = parsed.page;

    if (!slug || !CATEGORY_MAP[slug]) {
      renderNotFound();
      return;
    }

    var displayName = CATEGORY_MAP[slug];
    document.getElementById('breadcrumb-category').textContent = displayName;
    document.title = displayName + ' \u2013 Buy Discount Postage Online';

    if (!allProducts) return;

    var filtered = allProducts.filter(function(p) {
      return p.all_categories && p.all_categories.indexOf(displayName) !== -1;
    });

    if (filtered.length === 0) {
      document.getElementById('result-count-top').textContent = '0 results';
      document.getElementById('products-grid').innerHTML =
        '<p style="grid-column:1/-1;text-align:center;padding:2rem;">No products found in this category.</p>';
      document.getElementById('result-count-bottom').textContent = '';
      document.getElementById('pagination-nav').innerHTML = '';
      return;
    }

    renderProducts(filtered, page, slug);
  }

  function init() {
    // Try sessionStorage cache first for faster loads
    var cacheKey = 'yopao_products_cache';
    var cached = null;
    try { cached = JSON.parse(sessionStorage.getItem(cacheKey)); } catch(e) {}
    if (cached) {
      allProducts = cached;
      render();
      return;
    }

    // Fetch products from PHP API (MySQL database) with fallback to static JSON
    fetch('/api/products.php?action=list')
      .then(function(res) {
        if (!res.ok) throw new Error('API unavailable');
        return res.json();
      })
      .then(function(data) {
        data.forEach(ensureLocalProductImages);
        allProducts = data;
        try { sessionStorage.setItem(cacheKey, JSON.stringify(data)); } catch(e) {}
        render();
      })
      .catch(function() {
        // Fallback: load from static JSON file if API is not available
        fetch('../products_data.json')
          .then(function(res) { return res.json(); })
          .then(function(data) {
            data.forEach(ensureLocalProductImages);
            allProducts = data;
            try { sessionStorage.setItem(cacheKey, JSON.stringify(data)); } catch(e) {}
            render();
          })
          .catch(function() {
            document.getElementById('products-grid').innerHTML =
              '<p style="grid-column:1/-1;text-align:center;padding:2rem;">Error loading products.</p>';
          });
      });
  }

  window.addEventListener('hashchange', render);
  init();
})();
</script>

</body>
</html>
